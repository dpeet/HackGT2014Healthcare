{"changed":true,"filter":false,"title":"majorEventUpsertPage.js","tooltip":"/Meteor/HackGTHealthCare/client/workflows/Hospitals/majorEventUpsertPage.js","value":"\nRouter.map(function(){\n  this.route('hospitalUpsertPage', {\n    path: '/newHospital',\n    template: 'hospitalUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('hospital');\n    }\n  });\n  this.route('hospitalUpsertPage', {\n    path: '/editHospital/:id',\n    template: 'hospitalUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('hospitals');\n    },\n    data: function(){\n      return Hospitals.findOne(this.params.id);\n    }\n  });\n});\n\n//-------------------------------------------------------------\n\nTemplate.hospitalUpsertPage.events({\n  'keyup #titleInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'title': $('#titleInput').val()\n      }\n    });\n  },\n  'keyup #dateInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'date': $('#dateInput').val()\n      }\n    });\n  },\n  'keyup #timeInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'time': $('#timeInput').val()\n      }\n    });\n  },\n  'keyup #tagsInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'tags': $('#tagsInput').val()\n      }\n    });\n  },\n  'keyup #hospitalIdInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'hospitalId': $('#hospitalIdInput').val()\n      }\n    });\n  },\n  'keyup #notesInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'notes': $('#notesInput').val()\n      }\n    });\n  },\n  'keyup #drugsInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'drugs': $('#drugsInput').val()\n      }\n    });\n  },\n  \n  'click #previewHospitalButton':function(){\n    Router.go('/hospital/' + this._id);\n  }\n});\n\n\n\n//-------------------------------------------------------------\n\nTemplate.hospitalUpsertPage.helpers({\n  getRecordId: function() {\n    if(this._id) {\n      return this._id;\n    }else{\n      return \"---\";\n    }\n  }\n});\n\nTemplate.hospitalUpsertPage.events({\n  'click #upsertHospitalButton': function() {\n    console.log('creating new user...');\n\n      // TODO:  add validation functions\n\n      var majorEventObject = {\n        title: $('#titleInput').val(),\n        date: $('#dateInput').val(),\n        time: $('#timeInput').val(),\n        tags: $('#tagsInput').val(),\n        hospitalId: $('#hospitalIdInput').val(),\n        notes: $('#notesInput').val(),\n        drugs: $('#drugsInput').val()\n\n      };\n\n      if(this._id){\n        console.log('upserting ' + this._id);\n        var self = this;\n        majorEventObject._id = this._id;\n        Meteor.call('updateMajorEvent', majorEventObject, function(error, majorEvent){\n          console.log('error: ' + error);\n          if(majorEvent){\n            console.log('majorEvent: ' + majorEvent);\n            Router.go('/majorEvent/' + self._id);\n          }\n        });\n      }else{\n        Meteor.call('createNewMajorEvent', majorEventObject, function(error, majorEvent) {\n          console.log('error: ' + error);\n          console.log('majorEvent: ' + majorEvent);\n          Router.go('/majorEvent/' + majorEvent);\n        });\n      }\n\n  },\n  'click #deleteUserButton': function() {\n    MajorEvents.remove(Session.get('selected_user'));\n  },\n  'click #cancelDeleteButton': function() {\n    Router.go('/majorEvents');\n  }\n});\n","undoManager":{"mark":-33,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":16},"end":{"row":23,"column":17}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":25,"column":4},"end":{"row":25,"column":14}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":25,"column":4},"end":{"row":25,"column":5}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":25,"column":5},"end":{"row":25,"column":6}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":25,"column":6},"end":{"row":25,"column":7}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":25,"column":7},"end":{"row":25,"column":8}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":25,"column":8},"end":{"row":25,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":25,"column":9},"end":{"row":25,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":25,"column":10},"end":{"row":25,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":25,"column":11},"end":{"row":25,"column":12}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":4},"end":{"row":32,"column":14}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":32,"column":4},"end":{"row":32,"column":5}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":5},"end":{"row":32,"column":6}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":6},"end":{"row":32,"column":7}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":7},"end":{"row":32,"column":8}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":8},"end":{"row":32,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":9},"end":{"row":32,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":10},"end":{"row":32,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":11},"end":{"row":32,"column":12}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":39,"column":4},"end":{"row":39,"column":14}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":39,"column":4},"end":{"row":39,"column":5}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":39,"column":5},"end":{"row":39,"column":6}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":39,"column":6},"end":{"row":39,"column":7}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":39,"column":7},"end":{"row":39,"column":8}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":39,"column":8},"end":{"row":39,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":39,"column":9},"end":{"row":39,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":39,"column":10},"end":{"row":39,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":39,"column":11},"end":{"row":39,"column":12}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":46,"column":4},"end":{"row":46,"column":14}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":46,"column":4},"end":{"row":46,"column":5}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":5},"end":{"row":46,"column":6}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":6},"end":{"row":46,"column":7}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":7},"end":{"row":46,"column":8}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":8},"end":{"row":46,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":9},"end":{"row":46,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":10},"end":{"row":46,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":11},"end":{"row":46,"column":12}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":53,"column":4},"end":{"row":53,"column":14}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":53,"column":4},"end":{"row":53,"column":5}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":53,"column":4},"end":{"row":53,"column":5}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":4},"end":{"row":53,"column":5}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":5},"end":{"row":53,"column":6}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":6},"end":{"row":53,"column":7}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":7},"end":{"row":53,"column":8}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":8},"end":{"row":53,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":9},"end":{"row":53,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":10},"end":{"row":53,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":53,"column":11},"end":{"row":53,"column":12}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":60,"column":4},"end":{"row":60,"column":14}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":60,"column":4},"end":{"row":60,"column":5}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":5},"end":{"row":60,"column":6}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":6},"end":{"row":60,"column":7}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":7},"end":{"row":60,"column":8}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":8},"end":{"row":60,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":9},"end":{"row":60,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":10},"end":{"row":60,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":11},"end":{"row":60,"column":12}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":60,"column":12},"end":{"row":60,"column":13}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":60,"column":12},"end":{"row":60,"column":13}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":4},"end":{"row":67,"column":14}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":67,"column":4},"end":{"row":67,"column":5}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":5},"end":{"row":67,"column":6}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":6},"end":{"row":67,"column":7}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":7},"end":{"row":67,"column":8}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":8},"end":{"row":67,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":9},"end":{"row":67,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":10},"end":{"row":67,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":11},"end":{"row":67,"column":12}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":74,"column":17},"end":{"row":74,"column":27}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":74,"column":17},"end":{"row":74,"column":18}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":18},"end":{"row":74,"column":19}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":19},"end":{"row":74,"column":20}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":20},"end":{"row":74,"column":21}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":21},"end":{"row":74,"column":22}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":22},"end":{"row":74,"column":23}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":23},"end":{"row":74,"column":24}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":24},"end":{"row":74,"column":25}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":75,"column":16},"end":{"row":75,"column":26}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":75,"column":16},"end":{"row":75,"column":17}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":75,"column":17},"end":{"row":75,"column":18}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":75,"column":18},"end":{"row":75,"column":19}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":75,"column":19},"end":{"row":75,"column":20}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":75,"column":20},"end":{"row":75,"column":21}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":75,"column":21},"end":{"row":75,"column":22}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":75,"column":22},"end":{"row":75,"column":23}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":75,"column":23},"end":{"row":75,"column":24}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":83,"column":9},"end":{"row":83,"column":19}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":83,"column":9},"end":{"row":83,"column":10}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":83,"column":10},"end":{"row":83,"column":11}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":83,"column":11},"end":{"row":83,"column":12}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":83,"column":12},"end":{"row":83,"column":13}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":83,"column":13},"end":{"row":83,"column":14}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":83,"column":14},"end":{"row":83,"column":15}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":83,"column":15},"end":{"row":83,"column":16}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":83,"column":16},"end":{"row":83,"column":17}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":93,"column":9},"end":{"row":93,"column":19}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":93,"column":9},"end":{"row":93,"column":10}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":10},"end":{"row":93,"column":11}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":11},"end":{"row":93,"column":12}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":12},"end":{"row":93,"column":13}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":13},"end":{"row":93,"column":14}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":14},"end":{"row":93,"column":15}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":15},"end":{"row":93,"column":16}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":16},"end":{"row":93,"column":17}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":94,"column":16},"end":{"row":94,"column":26}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":94,"column":16},"end":{"row":94,"column":17}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":17},"end":{"row":94,"column":18}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":18},"end":{"row":94,"column":19}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":19},"end":{"row":94,"column":20}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":20},"end":{"row":94,"column":21}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":21},"end":{"row":94,"column":22}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":22},"end":{"row":94,"column":23}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":23},"end":{"row":94,"column":24}},"text":"l"}]}]]},"ace":{"folds":[],"scrolltop":900,"scrollleft":0,"selection":{"start":{"row":93,"column":27},"end":{"row":93,"column":27},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":63,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1411269052140}