{"changed":true,"filter":false,"title":"majorEvents.initialize.js","tooltip":"/Meteor/HackGTHealthCare/server/majorEvents.initialize.js","value":"Meteor.startup(function() {\n  /* TODO remove this bit */\n  Hospitals.remove({});\n  MajorEvents.remove({});\n  UserDrugs.remove({});\n  DrugUsage.remove({});\n\n\n  if ((MajorEvents.find().count() == 0)) {\n    console.log('No records in MajorEvents collection.  Bootstrapping some data.');\n    \n    var timestamp = new Date();\n\t\t\n\t\tHospitals.insert({\n\t\t  name: \"Grady\", \n\t\t  streetaddress: \"80 Jesse Hill Jr Dr SE\", \n\t\t  city: \"Atlanta\", \n\t\t  state: \"GA\", \n\t\t  zip: 30303, \n\t\t  lat: 33.752062, \n\t\t  long: -84.382198});\n\t\t  \n\t\tHospitals.insert({name: \"Duluth Medical\", streetaddress: \"3620 Howell Ferry Rd\", city: \"Duluth\", state: \"GA\", zip: 30096, lat: 34.001413, long: -84.163569});\n\t\tHospitals.insert({name: \"Sutter Medical Center\", streetaddress: \"3325 Chanate Rd\", city: \"Santa Rosa\", state: \"CA\", zip: 95404, lat: 38.469572, long: -122.707625});\n\t\tHospitals.insert({name: \"GaTech Student Center Ballroom\", streetaddress: \"350 Ferst Dr\", city: \"Atlanta\", state: \"GA\", zip: 30313, lat: 33.775258, long: -84.398707});\n\t\t\n\t\tvar h1 = Hospitals.find({name: \"Grady\"}).fetch();\n\t\tvar h2 = Hospitals.find({name: \"Duluth Medical\"}).fetch();\n\t\tvar h3 = Hospitals.find({name: \"Sutter Medical Center\"}).fetch();\n\t\tvar h4 = Hospitals.find({name: \"GaTech Student Center Ballroom\"}).fetch();\n\t\t\n\t\tUserDrugs.insert({\n\t\t  name: \"Fentanyl\", \n\t\t  chemicalName: \"Fentanyl\", \n\t\t  normalDosage: \"100cc\", \n\t\t  sideEffects: \"none\", \n\t\t  personalEffect: \"Good\", \n\t\t  notes: \"Extremely effective anesthetic\" \n\t\t});\n\t\t\n\t\tUserDrugs.insert({name: \"Propofol\", chemicalName: \"Propofol\", normalDosage: \"10cc/hr\", sideEffects: \"none\", personalEffect: \"Good\", notes: \"Reacted well, no side effects or lasting problems noticed\"});\n\t\tUserDrugs.insert({name: \"Ketamine\", chemicalName: \"Ketamine\", normalDosage: \"\", sideEffects: \"Drug induced psychosis\", personalEffect: \"Bad\", notes: \"Caused drug induced psychosis, and family emotional distress. Seek alternative strongly\"});\n\t\tUserDrugs.insert({name: \"Cookies\", chemicalName: \"Chocolate Chip\", normalDosage: \"1 Cookie\", sideEffects: \"Happiness\", personalEffect: \"Good\", notes: \"Suggested take with milk\"});\n\t\tUserDrugs.insert({name: \"Fig Newtons\", chemicalName: \"NewtonusFigians\", normalDosage: \"1 Sleeve\", sideEffects: \"Happiness\", personalEffect: \"Good\", notes: \"Suggested eat crumbs as well\"});\n\t\t\n\t\tvar d1 = UserDrugs.find({name: \"Fentanyl\"}).fetch();\n\t\tvar d2 = UserDrugs.find({name: \"Propofol\"}).fetch();\n\t\tvar d3 = UserDrugs.find({name: \"Ketamine\"}).fetch();\n\t\t\n\t\tvar d4 = UserDrugs.find({name: \"Cookies\"}).fetch();\n\t\tvar d5 = UserDrugs.find({name: \"Fig Newtons\"}).fetch();\n\n    var data = [{\n        \"title\": \"Motorcycle Accident - Grady\",\n        \"date\": \"2014-03-03\",\n        \"time\": \"11:00\",\n        \"tags\": [{tag:\"Shoulder\"}, {tag:\"Motorcycle\"}],\n        \"hospitalId\": h1[0]._id,\n        \"otherLocation\": \"\",\n        \"notes\": \"In the Grady trauma ER they performed the reduction on my right shoulder back in.  Afterwards both my left and right shoulders would sublux\",\n        \"drugs\": [d1[0]._id, d2[0]._id]\n      },\n\n      {\"title\": \"Hockey Dislocation - Duluth Med\",\"date\": \"2014-05-03\",\"time\": \"17:00\",\"tags\": [{tag:\"Shoulder\"},{tag:\"Motorcycle\"},{tag:\"Hockey\"}],\"hospitalId\": h2[0]._id,\"otherLocation\": \"\",\"notes\": \"They put your shoulder back in at Gwinnett Medical Center - Duluth ER.\",\"drugs\": [d1[0]._id,d2[0]._id]},\n      {\"title\": \"Midnight Dislocation - Santa Rosa\",\"date\": \"2014-08-29\",\"time\": \"1:00\",\"tags\": [{tag:\"Shoulder\"},{tag:\"Motorcycle\"},{tag:\"SleepReach\"}],\"hospitalId\": h3[0]._id,\"otherLocation\": \"\",\"notes\": \"In the Grady trauma ER they performed the reduction on my right shoulder back in.  Afterwards both my left and right shoulders would sublux\",\"drugs\": [d1[0]._id,d3[0]._id]},\n      {\"title\": \"GaTech Blood Donation\",\"date\": \"2014-06-31\",\"time\": \"15:00\",\"tags\": [{tag:\"BloodDonation\"}],\"hospitalId\": h4[0]._id,\"otherLocation\": \"\",\"notes\": \"Donated blood for the first time! They even gave us cookies and snacks to recover our strength\",\"drugs\": [d4[0]._id,d5[0]._id]}\n    ];\n\n\n    console.log('Adding records to MajorEvents collection.');\n    for (var i = 0; i < data.length; i++) {\n      MajorEvents.insert({\n        title: data[i].title,\n        date: data[i].date,\n        time: data[i].time,\n        tags: data[i].tags,\n        hospitalId: data[i].hospitalId,\n        otherLocation: data[i].otherLocation,\n        notes: data[i].notes,\n        drugs: data[i].drugs,\n        createdAt: new Date()\n      });\n\n    }\n    console.log('Records successfully added to MajorEvents collection.');\n  }\n  console.log('MajorEvents collection initialized and ready.');\n});","undoManager":{"mark":-1,"position":61,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":54},"end":{"row":63,"column":62}},"text":"5/3/2014"},{"action":"insertText","range":{"start":{"row":63,"column":54},"end":{"row":63,"column":64}},"text":"2014-06-31"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":61},"end":{"row":64,"column":70}},"text":"8/30/2014"},{"action":"insertText","range":{"start":{"row":64,"column":61},"end":{"row":64,"column":71}},"text":"2014-06-31"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":60},"end":{"row":63,"column":61}},"text":"6"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":60},"end":{"row":63,"column":61}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":62},"end":{"row":63,"column":63}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":62},"end":{"row":63,"column":63}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":62},"end":{"row":63,"column":63}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":63},"end":{"row":63,"column":64}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":67},"end":{"row":64,"column":68}},"text":"6"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":67},"end":{"row":64,"column":68}},"text":"5"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":70},"end":{"row":64,"column":71}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":69},"end":{"row":64,"column":70}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":69},"end":{"row":64,"column":70}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":70},"end":{"row":64,"column":71}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":75},"end":{"row":63,"column":76}},"text":"5"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":75},"end":{"row":63,"column":76}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":75},"end":{"row":63,"column":76}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":75},"end":{"row":63,"column":76}},"text":"2"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":76},"end":{"row":63,"column":77}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":76},"end":{"row":63,"column":77}},"text":":"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":77},"end":{"row":63,"column":78}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":78},"end":{"row":63,"column":79}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":75},"end":{"row":63,"column":76}},"text":"2"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":75},"end":{"row":63,"column":76}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":76},"end":{"row":63,"column":77}},"text":"7"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":67},"end":{"row":64,"column":68}},"text":"5"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":67},"end":{"row":64,"column":68}},"text":"8"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":70},"end":{"row":64,"column":71}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":69},"end":{"row":64,"column":70}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":69},"end":{"row":64,"column":70}},"text":"2"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":70},"end":{"row":64,"column":71}},"text":"9"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":54,"column":18},"end":{"row":54,"column":25}},"text":"/3/2014"},{"action":"insertText","range":{"start":{"row":54,"column":18},"end":{"row":54,"column":28}},"text":"2014-08-29"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":60},"end":{"row":63,"column":61}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":60},"end":{"row":63,"column":61}},"text":"5"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":54,"column":24},"end":{"row":54,"column":25}},"text":"8"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":54,"column":24},"end":{"row":54,"column":25}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":54,"column":26},"end":{"row":54,"column":27}},"text":"2"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":54,"column":26},"end":{"row":54,"column":27}},"text":"9"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":54,"column":26},"end":{"row":54,"column":27}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":54,"column":27},"end":{"row":54,"column":28}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":54,"column":17},"end":{"row":54,"column":18}},"text":"3"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":55,"column":17},"end":{"row":55,"column":21}},"text":"1 pm"},{"action":"insertText","range":{"start":{"row":55,"column":17},"end":{"row":55,"column":18}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":18},"end":{"row":55,"column":19}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":19},"end":{"row":55,"column":20}},"text":":"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":20},"end":{"row":55,"column":21}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":21},"end":{"row":55,"column":22}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":38},"end":{"row":63,"column":43}},"text":"Grady"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":38},"end":{"row":63,"column":39}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":39},"end":{"row":63,"column":40}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":40},"end":{"row":63,"column":41}},"text":"k"},{"action":"insertText","range":{"start":{"row":63,"column":41},"end":{"row":63,"column":42}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":41},"end":{"row":63,"column":42}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":40},"end":{"row":63,"column":41}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":40},"end":{"row":63,"column":41}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":41},"end":{"row":63,"column":42}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":42},"end":{"row":63,"column":43}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":43},"end":{"row":63,"column":44}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":44},"end":{"row":63,"column":45}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":45},"end":{"row":63,"column":46}},"text":"M"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":46},"end":{"row":63,"column":47}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":47},"end":{"row":63,"column":48}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":48},"end":{"row":63,"column":49}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":48},"end":{"row":63,"column":49}},"text":"."}]}]]},"ace":{"folds":[],"scrolltop":360,"scrollleft":0,"selection":{"start":{"row":32,"column":11},"end":{"row":32,"column":19},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":{"row":22,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1411289050344}