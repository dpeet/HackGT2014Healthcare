{"changed":true,"filter":false,"title":"hospitalUpsertPage.js","tooltip":"/Meteor/HackGTHealthCare/client/workflows/Hospitals/hospitalUpsertPage.js","value":"\nRouter.map(function(){\n  this.route('hospitalUpsertPage', {\n    path: '/newHospital',\n    template: 'hospitalUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('hospital');\n    }\n  });\n  this.route('hospitalUpsertPage', {\n    path: '/editHospital/:id',\n    template: 'hospitalUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('hospital');\n    },\n    data: function(){\n      return Hospitals.findOne(this.params.id);\n    }\n  });\n});\n\n//-------------------------------------------------------------\n\nTemplate.hospitalUpsertPage.events({\n  'keyup #nameInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'name': $('#nameInput').val()\n      }\n    });\n  },\n  'keyup #streetaddressInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'streetaddress': $('#streetaddressInput').val()\n      }\n    });\n  },\n  'keyup #cityInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'city': $('#cityInput').val()\n      }\n    });\n  },\n  'keyup #stateInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'state': $('#stateInput').val()\n      }\n    });\n  },\n  'keyup #latInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'lat': $('#latInput').val()\n      }\n    });\n  },\n  'keyup #longInput':function(){\n    Hospitals.update({_id: this._id}, {\n      $set: {\n        'long': $('#longInput').val()\n      }\n    });\n  },\n  \n  'click #previewHospitalButton':function(){\n    Router.go('/hospital/' + this._id);\n  }\n});\n\n\n\n//-------------------------------------------------------------\n\nTemplate.hospitalUpsertPage.helpers({\n  getRecordId: function() {\n    if(this._id) {\n      return this._id;\n    }else{\n      return \"---\";\n    }\n  }\n});\n\nTemplate.hospitalUpsertPage.events({\n  'click #upsertHospitalButton': function() {\n    console.log('creating new hospital...');\n\n      // TODO:  add validation functions\n\n      var hospitalObject = {\n        name: $('#nameInput').val(),\n        streetaddress: $('#streetaddressInput').val(),\n        city: $('#cityInput').val(),\n        state: $('#stateInput').val(),\n        zip: $('#zipInput').val(),\n        lat: $('#latInput').val(),\n        long: $('#longInput').val()\n\n      };\n\n      if(this._id){\n        console.log('upserting ' + this._id);\n        var self = this;\n        hospitalObject._id = this._id;\n        Meteor.call('updateHospital', hospitalObject, function(error, hospital){\n          console.log('error: ' + error);\n          if(hospital){\n            console.log('hospital: ' + hospital);\n            Router.go('/hospital/' + self._id);\n          }\n        });\n      }else{\n        Meteor.call('createNewHospital', hospitalObject, function(error, hospital) {\n          console.log('error: ' + error);\n          console.log('hospital: ' + hospital);\n          Router.go('/hospital/' + hospital);\n        });\n      }\n\n  },\n  'click #deleteUserButton': function() {\n    Hospitals.remove(Session.get('selected_user'));\n  },\n  'click #cancelDeleteButton': function() {\n    Router.go('/hospitals');\n  }\n});\n","undoManager":{"mark":98,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":10},"end":{"row":31,"column":14}},"text":"date"},{"action":"insertText","range":{"start":{"row":31,"column":10},"end":{"row":31,"column":11}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":11},"end":{"row":31,"column":12}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":12},"end":{"row":31,"column":13}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":13},"end":{"row":31,"column":14}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":14},"end":{"row":31,"column":15}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":15},"end":{"row":31,"column":16}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":16},"end":{"row":31,"column":17}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":17},"end":{"row":31,"column":18}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":18},"end":{"row":31,"column":19}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":19},"end":{"row":31,"column":20}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":20},"end":{"row":31,"column":21}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":21},"end":{"row":31,"column":22}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":22},"end":{"row":31,"column":23}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":34,"column":9},"end":{"row":34,"column":13}},"text":"date"},{"action":"insertText","range":{"start":{"row":34,"column":9},"end":{"row":34,"column":10}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":10},"end":{"row":34,"column":11}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":11},"end":{"row":34,"column":12}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":12},"end":{"row":34,"column":13}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":13},"end":{"row":34,"column":14}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":14},"end":{"row":34,"column":15}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":15},"end":{"row":34,"column":16}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":16},"end":{"row":34,"column":17}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":17},"end":{"row":34,"column":18}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":18},"end":{"row":34,"column":19}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":19},"end":{"row":34,"column":20}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":20},"end":{"row":34,"column":21}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":21},"end":{"row":34,"column":22}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":34,"column":30},"end":{"row":34,"column":33}},"text":"ate"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":34,"column":29},"end":{"row":34,"column":30}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":29},"end":{"row":34,"column":30}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":30},"end":{"row":34,"column":31}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":31},"end":{"row":34,"column":32}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":32},"end":{"row":34,"column":33}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":33},"end":{"row":34,"column":34}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":34},"end":{"row":34,"column":35}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":35},"end":{"row":34,"column":36}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":36},"end":{"row":34,"column":37}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":37},"end":{"row":34,"column":38}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":38},"end":{"row":34,"column":39}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":39},"end":{"row":34,"column":40}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":40},"end":{"row":34,"column":41}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":34,"column":41},"end":{"row":34,"column":42}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":38,"column":10},"end":{"row":38,"column":14}},"text":"time"},{"action":"insertText","range":{"start":{"row":38,"column":10},"end":{"row":38,"column":11}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":38,"column":11},"end":{"row":38,"column":12}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":38,"column":12},"end":{"row":38,"column":13}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":38,"column":13},"end":{"row":38,"column":14}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":41,"column":20},"end":{"row":41,"column":24}},"text":"time"},{"action":"insertText","range":{"start":{"row":41,"column":20},"end":{"row":41,"column":21}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":41,"column":21},"end":{"row":41,"column":22}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":41,"column":22},"end":{"row":41,"column":23}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":41,"column":23},"end":{"row":41,"column":24}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":41,"column":9},"end":{"row":41,"column":13}},"text":"time"},{"action":"insertText","range":{"start":{"row":41,"column":9},"end":{"row":41,"column":10}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":41,"column":10},"end":{"row":41,"column":11}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":41,"column":11},"end":{"row":41,"column":12}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":41,"column":12},"end":{"row":41,"column":13}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":45,"column":10},"end":{"row":45,"column":14}},"text":"tags"},{"action":"insertText","range":{"start":{"row":45,"column":10},"end":{"row":45,"column":11}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":45,"column":11},"end":{"row":45,"column":12}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":45,"column":12},"end":{"row":45,"column":13}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":45,"column":13},"end":{"row":45,"column":14}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":45,"column":14},"end":{"row":45,"column":15}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":48,"column":20},"end":{"row":48,"column":24}},"text":"tags"},{"action":"insertText","range":{"start":{"row":48,"column":20},"end":{"row":48,"column":21}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":21},"end":{"row":48,"column":22}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":22},"end":{"row":48,"column":23}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":23},"end":{"row":48,"column":24}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":24},"end":{"row":48,"column":25}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":48,"column":9},"end":{"row":48,"column":13}},"text":"tags"},{"action":"insertText","range":{"start":{"row":48,"column":9},"end":{"row":48,"column":10}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":10},"end":{"row":48,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":48,"column":10},"end":{"row":48,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":10},"end":{"row":48,"column":11}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":11},"end":{"row":48,"column":12}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":12},"end":{"row":48,"column":13}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":13},"end":{"row":48,"column":14}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":14},"end":{"row":48,"column":15}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":48,"column":14},"end":{"row":48,"column":15}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":48,"column":13},"end":{"row":48,"column":14}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":48,"column":12},"end":{"row":48,"column":13}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":12},"end":{"row":48,"column":13}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":13},"end":{"row":48,"column":14}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":52,"column":10},"end":{"row":52,"column":20}},"text":"hospitalId"},{"action":"insertText","range":{"start":{"row":52,"column":10},"end":{"row":52,"column":11}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":52,"column":11},"end":{"row":52,"column":12}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":52,"column":12},"end":{"row":52,"column":13}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":55,"column":9},"end":{"row":55,"column":19}},"text":"hospitalId"},{"action":"insertText","range":{"start":{"row":55,"column":9},"end":{"row":55,"column":10}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":10},"end":{"row":55,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":11},"end":{"row":55,"column":12}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":55,"column":19},"end":{"row":55,"column":29}},"text":"hospitalId"},{"action":"insertText","range":{"start":{"row":55,"column":19},"end":{"row":55,"column":20}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":20},"end":{"row":55,"column":21}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":21},"end":{"row":55,"column":22}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":59,"column":10},"end":{"row":59,"column":15}},"text":"notes"},{"action":"insertText","range":{"start":{"row":59,"column":10},"end":{"row":59,"column":11}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":11},"end":{"row":59,"column":12}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":12},"end":{"row":59,"column":13}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":13},"end":{"row":59,"column":14}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":62,"column":21},"end":{"row":62,"column":26}},"text":"notes"},{"action":"insertText","range":{"start":{"row":62,"column":21},"end":{"row":62,"column":22}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":62,"column":22},"end":{"row":62,"column":23}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":62,"column":23},"end":{"row":62,"column":24}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":62,"column":24},"end":{"row":62,"column":25}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":62,"column":9},"end":{"row":62,"column":14}},"text":"notes"},{"action":"insertText","range":{"start":{"row":62,"column":9},"end":{"row":62,"column":10}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":62,"column":10},"end":{"row":62,"column":11}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":62,"column":11},"end":{"row":62,"column":12}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":62,"column":12},"end":{"row":62,"column":13}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":72,"column":0},"end":{"row":72,"column":4}},"text":"  },"},{"action":"removeLines","range":{"start":{"row":66,"column":0},"end":{"row":72,"column":0}},"nl":"\n","lines":["  'keyup #drugsInput':function(){","    Hospitals.update({_id: this._id}, {","      $set: {","        'drugs': $('#drugsInput').val()","      }","    });"]},{"action":"removeText","range":{"start":{"row":65,"column":4},"end":{"row":66,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":13,"column":39},"end":{"row":13,"column":40}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":16,"column":21},"end":{"row":16,"column":22}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":21},"end":{"row":16,"column":22}},"text":"s"}]}]]},"ace":{"folds":[],"scrolltop":60,"scrollleft":0,"selection":{"start":{"row":16,"column":22},"end":{"row":16,"column":22},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1411271245394}