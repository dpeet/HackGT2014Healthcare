{"changed":true,"filter":false,"title":"hospitalsListPage.js","tooltip":"/Meteor/HackGTHealthCare/client/workflows/Hospitals/hospitalsListPage.js","value":"Session.setDefault('hospitalsReceivedData', false);\nSession.setDefault('hospitalsSearchFilter', '');\nSession.setDefault('hospitalsTableLimit', 20);\nSession.setDefault('hospitalsPaginationCount', 1);\nSession.setDefault('hospitalsSelectedPagination', 0);\nSession.setDefault('hospitalsSkipCount', 0);\n\n\n//------------------------------------------------\n// ROUTING\n\nRouter.map(function(){\n  this.route('hospitalsListPage', {\n    path: '/hospitals',\n    template: 'hospitalsListPage',\n    waitOn: function(){\n      return Meteor.subscribe('hospital');\n    }\n  });\n});\n\nTemplate.map.rendered = function() {\n    if (! Session.get('map'))\n        gmaps.initialize();\n \n    Deps.autorun(function() {\n        var hs = Hospitals.find().fetch();\n \n        _.each(hs, function(h) {\n            if (typeof h.lat !== 'undefined' &&\n                typeof h.long !== 'undefined') {\n \n                var objMarker = {\n                    id: h._id,\n                    lat: h.lat,\n                    lng: h.long,\n                    title: h.name\n                };\n \n                // check if marker already exists\n                if (!gmaps.markerExists('id', objMarker.id))\n                    gmaps.addMarker(objMarker);\n \n            }\n        });\n        \n        gmaps.calcBounds();\n    });\n};\n\nTemplate.map.destroyed = function() {\n    Session.set('map', false);\n};\n\n\n//------------------------------------------------\n// HELPERS\nTemplate.hospitalsListPage.helpers({\n  hospitalsList: function(){\n    var hospitalsCount = Hospitals.find({$or:[\n      {name: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {streetaddress: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {city: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {state: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {zip: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {lat: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {long: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}\n      ]\n    }).count();\n    Session.set('hospitalsReceivedData', new Date());\n    Session.set('hospitalsPaginationCount', Math.floor((hospitalsCount - 1) / Session.get('hospitalsTableLimit')) + 1);\n    return Hospitals.find({$or:[\n      {name: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {streetaddress: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {city: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {state: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {zip: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {lat: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},\n      {long: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}\n      ]\n    },{limit: Session.get('hospitalsTableLimit'), skip: Session.get('hospitalsSkipCount')});\n  },\n  rendered: function(){\n    $(this.find('#hospitalsTable')).tablesorter();\n\n    // Deps.autorun(function(){\n    //   console.log(Session.get('hospitalsReceivedData'));\n    //   setTimeout(function(){\n    //     $(\"#hospitalsTable\").trigger(\"update\");\n    //   }, 200);\n    // });\n  }\n});\n\nTemplate.hospitalsListPage.events({\n  'keyup #hospitalsSearchInput':function(){\n    Session.set('hospitalsSearchFilter', $('#hospitalsSearchInput').val());\n    Session.setDefault('hospitalsSelectedPagination', 0);\n    Session.setDefault('hospitalsSkipCount', 0);\n  },\n  'click #twentyButton':function(){\n    Session.set('hospitalsTableLimit', 20);\n  },\n  'click #fiftyButton': function(){\n    Session.set('hospitalsTableLimit', 50);\n  },\n  'click #hundredButton': function(){\n    Session.set('hospitalsTableLimit', 100);\n  },\n  'click .pagination-btn':function(){\n    //alert(JSON.stringify(this.index));\n    Session.set('hospitalsSelectedPagination', this.index);\n    Session.set('hospitalsSkipCount', this.index * Session.get('hospitalsTableLimit'));\n  },\n  'click .hospitalRow':function(){\n    Session.set('selectedUser', this._id);\n    Router.go('/hospital/' + this._id);\n    //alert(this._id);\n  }\n});\n\n\nTemplate.hospitalsListPage.helpers({\n  getPaginationCount: function(){\n    return Session.get('hospitalsPaginationCount');\n  },\n  paginationButtonHospitalsList: function(){\n    var paginationArray = [];\n    for (var i = 0; i < Session.get('hospitalsPaginationCount'); i++) {\n      paginationArray[i] = {\n        index: i\n      };\n    }\n    if(paginationArray.length > 1){\n      return paginationArray;\n    }else{\n      return [];\n    }\n  },\n  isTwentyActive: function(){\n    if(Session.get('hospitalsTableLimit') === 20){\n      return \"active\";\n    }\n  },\n  isFiftyActive: function(){\n    if(Session.get('hospitalsTableLimit') === 50){\n      return \"active\";\n    }\n  },\n  isHundredActive: function(){\n    if(Session.get('hospitalsTableLimit') === 100){\n      return \"active\";\n    }\n  }\n});\n\n\n\nTemplate.paginationButtonHospitals.helpers({\n  pageActive: function(){\n    if(this.index === Session.get('hospitalsSelectedPagination')){\n      return \"active\";\n    }\n  },\n  getPage: function(){\n    return this.index + 1;\n  }\n});\n","undoManager":{"mark":97,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":45,"column":16},"end":{"row":45,"column":17}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":45,"column":14},"end":{"row":45,"column":17}},"text":"cal"},{"action":"insertText","range":{"start":{"row":45,"column":14},"end":{"row":45,"column":24}},"text":"calcBounds"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":45,"column":24},"end":{"row":45,"column":25}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":45,"column":24},"end":{"row":45,"column":26}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":44,"column":11},"end":{"row":45,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":45,"column":0},"end":{"row":45,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":65,"column":80},"end":{"row":65,"column":81}},"text":"*"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":65,"column":79},"end":{"row":65,"column":80}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":65,"column":78},"end":{"row":65,"column":79}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":84},"end":{"row":71,"column":85}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":83},"end":{"row":71,"column":84}},"text":"*"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":82},"end":{"row":71,"column":83}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":80},"end":{"row":80,"column":81}},"text":"*"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":79},"end":{"row":80,"column":80}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":78},"end":{"row":80,"column":79}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":86,"column":84},"end":{"row":86,"column":85}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":86,"column":83},"end":{"row":86,"column":84}},"text":"*"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":86,"column":82},"end":{"row":86,"column":83}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":63,"column":78},"end":{"row":64,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":64,"column":0},"end":{"row":64,"column":79}},"text":"      {state: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":64,"column":7},"end":{"row":64,"column":12}},"text":"state"},{"action":"insertText","range":{"start":{"row":64,"column":7},"end":{"row":64,"column":8}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":8},"end":{"row":64,"column":9}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":9},"end":{"row":64,"column":10}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":10},"end":{"row":64,"column":11}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":11},"end":{"row":64,"column":12}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":12},"end":{"row":64,"column":13}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":13},"end":{"row":64,"column":14}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":14},"end":{"row":64,"column":15}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":15},"end":{"row":64,"column":16}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":16},"end":{"row":64,"column":17}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":17},"end":{"row":64,"column":18}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":18},"end":{"row":64,"column":19}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":64,"column":19},"end":{"row":64,"column":20}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":7},"end":{"row":67,"column":11}},"text":"tags"},{"action":"insertText","range":{"start":{"row":67,"column":7},"end":{"row":67,"column":8}},"text":"z"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":8},"end":{"row":67,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":9},"end":{"row":67,"column":10}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":68,"column":7},"end":{"row":68,"column":17}},"text":"hospitalId"},{"action":"insertText","range":{"start":{"row":68,"column":7},"end":{"row":68,"column":8}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":8},"end":{"row":68,"column":9}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":9},"end":{"row":68,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":69,"column":7},"end":{"row":69,"column":20}},"text":"otherLocation"},{"action":"insertText","range":{"start":{"row":69,"column":7},"end":{"row":69,"column":8}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":69,"column":8},"end":{"row":69,"column":9}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":69,"column":9},"end":{"row":69,"column":10}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":69,"column":10},"end":{"row":69,"column":11}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":72,"column":0},"end":{"row":72,"column":82}},"text":"      {createdAt: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}"},{"action":"removeLines","range":{"start":{"row":70,"column":0},"end":{"row":72,"column":0}},"nl":"\n","lines":["      {notes: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {drugs: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},"]},{"action":"removeText","range":{"start":{"row":69,"column":77},"end":{"row":69,"column":78}},"text":","},{"action":"removeText","range":{"start":{"row":69,"column":77},"end":{"row":70,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":69,"column":77},"end":{"row":70,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":76,"column":7},"end":{"row":76,"column":11}},"text":"city"},{"action":"insertText","range":{"start":{"row":76,"column":7},"end":{"row":76,"column":8}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":76,"column":8},"end":{"row":76,"column":9}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":76,"column":9},"end":{"row":76,"column":10}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":76,"column":10},"end":{"row":76,"column":11}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":76,"column":11},"end":{"row":76,"column":12}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":76,"column":7},"end":{"row":76,"column":12}},"text":"stree"},{"action":"insertText","range":{"start":{"row":76,"column":7},"end":{"row":76,"column":20}},"text":"streetaddress"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":77,"column":7},"end":{"row":77,"column":12}},"text":"state"},{"action":"insertText","range":{"start":{"row":77,"column":7},"end":{"row":77,"column":8}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":77,"column":8},"end":{"row":77,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":77,"column":9},"end":{"row":77,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":77,"column":10},"end":{"row":77,"column":11}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":77,"column":7},"end":{"row":77,"column":11}},"text":"city"},{"action":"insertText","range":{"start":{"row":77,"column":7},"end":{"row":77,"column":11}},"text":"city"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":78,"column":7},"end":{"row":78,"column":11}},"text":"tags"},{"action":"insertText","range":{"start":{"row":78,"column":7},"end":{"row":78,"column":8}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":8},"end":{"row":78,"column":9}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":9},"end":{"row":78,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":78,"column":9},"end":{"row":78,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":78,"column":8},"end":{"row":78,"column":9}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":8},"end":{"row":78,"column":9}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":9},"end":{"row":78,"column":10}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":10},"end":{"row":78,"column":11}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":11},"end":{"row":78,"column":12}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":79,"column":7},"end":{"row":79,"column":17}},"text":"hospitalId"},{"action":"insertText","range":{"start":{"row":79,"column":7},"end":{"row":79,"column":8}},"text":"z"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":8},"end":{"row":79,"column":9}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":9},"end":{"row":79,"column":10}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":79,"column":7},"end":{"row":79,"column":10}},"text":"zip"},{"action":"insertText","range":{"start":{"row":79,"column":7},"end":{"row":79,"column":10}},"text":"zip"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":7},"end":{"row":80,"column":20}},"text":"otherLocation"},{"action":"insertText","range":{"start":{"row":80,"column":7},"end":{"row":80,"column":8}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":8},"end":{"row":80,"column":9}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":9},"end":{"row":80,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":7},"end":{"row":80,"column":10}},"text":"lat"},{"action":"insertText","range":{"start":{"row":80,"column":7},"end":{"row":80,"column":10}},"text":"lat"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":81,"column":7},"end":{"row":81,"column":12}},"text":"notes"},{"action":"insertText","range":{"start":{"row":81,"column":7},"end":{"row":81,"column":8}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":81,"column":8},"end":{"row":81,"column":9}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":81,"column":9},"end":{"row":81,"column":10}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":81,"column":10},"end":{"row":81,"column":11}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":81,"column":7},"end":{"row":81,"column":11}},"text":"long"},{"action":"insertText","range":{"start":{"row":81,"column":7},"end":{"row":81,"column":11}},"text":"long"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":83,"column":0},"end":{"row":83,"column":82}},"text":"      {createdAt: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}"},{"action":"removeLines","range":{"start":{"row":82,"column":0},"end":{"row":83,"column":0}},"nl":"\n","lines":["      {drugs: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},"]},{"action":"removeText","range":{"start":{"row":81,"column":78},"end":{"row":82,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":81,"column":77},"end":{"row":81,"column":78}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":57,"column":0},"end":{"row":57,"column":36}},"text":"Template.hospitalsListPage.helpers({"},{"action":"insertText","range":{"start":{"row":57,"column":36},"end":{"row":58,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":58,"column":0},"end":{"row":92,"column":0}},"lines":["  hospitalsList: function(){","    var hospitalsCount = Hospitals.find({$or:[","      {name: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {streetaddress: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {city: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {state: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {zip: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {lat: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {long: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}","      ]","    }).count();","    Session.set('hospitalsReceivedData', new Date());","    Session.set('hospitalsPaginationCount', Math.floor((hospitalsCount - 1) / Session.get('hospitalsTableLimit')) + 1);","    return Hospitals.find({$or:[","      {name: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {streetaddress: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {city: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {state: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {zip: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {lat: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {long: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}","      ]","    },{limit: Session.get('hospitalsTableLimit'), skip: Session.get('hospitalsSkipCount')});","  },","  rendered: function(){","    $(this.find('#hospitalsTable')).tablesorter();","","    // Deps.autorun(function(){","    //   console.log(Session.get('hospitalsReceivedData'));","    //   setTimeout(function(){","    //     $(\"#hospitalsTable\").trigger(\"update\");","    //   }, 200);","    // });","  }"]},{"action":"insertText","range":{"start":{"row":92,"column":0},"end":{"row":92,"column":3}},"text":"});"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":93,"column":0},"end":{"row":94,"column":0}},"nl":"\n","lines":[""]},{"action":"removeText","range":{"start":{"row":92,"column":3},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":92,"column":3},"end":{"row":92,"column":4}},"text":"\\"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":92,"column":3},"end":{"row":92,"column":4}},"text":"\\"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":92,"column":3},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":57,"column":17},"end":{"row":57,"column":26}},"text":"sListPage"},{"action":"insertText","range":{"start":{"row":57,"column":17},"end":{"row":57,"column":18}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":57,"column":18},"end":{"row":57,"column":19}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":57,"column":19},"end":{"row":57,"column":20}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":57,"column":20},"end":{"row":57,"column":21}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":93,"column":0},"end":{"row":130,"column":0}},"nl":"\n","lines":["","Template.hospitalsListPage.helpers({","  hospitalsList: function(){","    var hospitalsCount = Hospitals.find({$or:[","      {name: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {streetaddress: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {city: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {state: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {zip: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {lat: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {long: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}","      ]","    }).count();","    Session.set('hospitalsReceivedData', new Date());","    Session.set('hospitalsPaginationCount', Math.floor((hospitalsCount - 1) / Session.get('hospitalsTableLimit')) + 1);","    return Hospitals.find({$or:[","      {name: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {streetaddress: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {city: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {state: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {zip: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {lat: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }},","      {long: { $regex: Session.get('hospitalsSearchFilter'), $options: 'i' }}","      ]","    },{limit: Session.get('hospitalsTableLimit'), skip: Session.get('hospitalsSkipCount')});","  },","  rendered: function(){","    $(this.find('#hospitalsTable')).tablesorter();","","    // Deps.autorun(function(){","    //   console.log(Session.get('hospitalsReceivedData'));","    //   setTimeout(function(){","    //     $(\"#hospitalsTable\").trigger(\"update\");","    //   }, 200);","    // });","  }","});"]},{"action":"removeText","range":{"start":{"row":92,"column":3},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":93,"column":0},"end":{"row":94,"column":0}},"nl":"\n","lines":[""]},{"action":"removeText","range":{"start":{"row":92,"column":3},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":93,"column":0},"end":{"row":94,"column":0}},"nl":"\n","lines":[""]},{"action":"removeText","range":{"start":{"row":92,"column":3},"end":{"row":93,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":92,"column":3},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":94,"column":17},"end":{"row":94,"column":26}},"text":"sListPage"},{"action":"insertText","range":{"start":{"row":94,"column":17},"end":{"row":94,"column":18}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":18},"end":{"row":94,"column":19}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":19},"end":{"row":94,"column":20}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":94,"column":20},"end":{"row":94,"column":21}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":17},"end":{"row":122,"column":26}},"text":"sListPage"},{"action":"insertText","range":{"start":{"row":122,"column":17},"end":{"row":122,"column":18}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":18},"end":{"row":122,"column":19}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":19},"end":{"row":122,"column":20}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":20},"end":{"row":122,"column":21}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":57,"column":9},"end":{"row":57,"column":21}},"text":"hospitalData"},{"action":"insertText","range":{"start":{"row":57,"column":9},"end":{"row":57,"column":26}},"text":"hospitalsListPage"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":94,"column":9},"end":{"row":94,"column":21}},"text":"hospitalData"},{"action":"insertText","range":{"start":{"row":94,"column":9},"end":{"row":94,"column":26}},"text":"hospitalsListPage"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":9},"end":{"row":122,"column":21}},"text":"hospitalData"},{"action":"insertText","range":{"start":{"row":122,"column":9},"end":{"row":122,"column":26}},"text":"hospitalsListPage"}]}]]},"ace":{"folds":[],"scrolltop":1260,"scrollleft":0,"selection":{"start":{"row":122,"column":26},"end":{"row":122,"column":26},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":24,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1411277515346}