{"changed":true,"filter":false,"title":"majorEventUpsertPage.js","tooltip":"/Meteor/HackGTHealthCare/client/workflows/Hospitals/majorEventUpsertPage.js","value":"\nRouter.map(function(){\n  this.route('hospitalUpsertPage', {\n    path: '/newHospital',\n    template: 'hospitalUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('hospital');\n    }\n  });\n  this.route('hospitalUpsertPage', {\n    path: '/editHospital/:id',\n    template: 'hospitalUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('hospitals');\n    },\n    data: function(){\n      return Hospitals.findOne(this.params.id);\n    }\n  });\n});\n\n//-------------------------------------------------------------\n\nTemplate.hospitalUpsertPage.events({\n  'keyup #titleInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'title': $('#titleInput').val()\n      }\n    });\n  },\n  'keyup #dateInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'date': $('#dateInput').val()\n      }\n    });\n  },\n  'keyup #timeInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'time': $('#timeInput').val()\n      }\n    });\n  },\n  'keyup #tagsInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'tags': $('#tagsInput').val()\n      }\n    });\n  },\n  'keyup #hospitalIdInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'hospitalId': $('#hospitalIdInput').val()\n      }\n    });\n  },\n  'keyup #notesInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'notes': $('#notesInput').val()\n      }\n    });\n  },\n  'keyup #drugsInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'drugs': $('#drugsInput').val()\n      }\n    });\n  },\n  \n  'click #previewMajorEventButton':function(){\n    Router.go('/majorEvent/' + this._id);\n  }\n});\n\n\n\n//-------------------------------------------------------------\n\nTemplate.majorEventUpsertPage.helpers({\n  getRecordId: function() {\n    if(this._id) {\n      return this._id;\n    }else{\n      return \"---\";\n    }\n  }\n});\n\nTemplate.majorEventUpsertPage.events({\n  'click #upsertMajorEventButton': function() {\n    console.log('creating new user...');\n\n      // TODO:  add validation functions\n\n      var majorEventObject = {\n        title: $('#titleInput').val(),\n        date: $('#dateInput').val(),\n        time: $('#timeInput').val(),\n        tags: $('#tagsInput').val(),\n        hospitalId: $('#hospitalIdInput').val(),\n        notes: $('#notesInput').val(),\n        drugs: $('#drugsInput').val()\n\n      };\n\n      if(this._id){\n        console.log('upserting ' + this._id);\n        var self = this;\n        majorEventObject._id = this._id;\n        Meteor.call('updateMajorEvent', majorEventObject, function(error, majorEvent){\n          console.log('error: ' + error);\n          if(majorEvent){\n            console.log('majorEvent: ' + majorEvent);\n            Router.go('/majorEvent/' + self._id);\n          }\n        });\n      }else{\n        Meteor.call('createNewMajorEvent', majorEventObject, function(error, majorEvent) {\n          console.log('error: ' + error);\n          console.log('majorEvent: ' + majorEvent);\n          Router.go('/majorEvent/' + majorEvent);\n        });\n      }\n\n  },\n  'click #deleteUserButton': function() {\n    MajorEvents.remove(Session.get('selected_user'));\n  },\n  'click #cancelDeleteButton': function() {\n    Router.go('/majorEvents');\n  }\n});\n","undoManager":{"mark":49,"position":82,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":2,"column":14},"end":{"row":2,"column":24}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":2,"column":14},"end":{"row":2,"column":15}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":15},"end":{"row":2,"column":16}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":16},"end":{"row":2,"column":17}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":17},"end":{"row":2,"column":18}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":18},"end":{"row":2,"column":19}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":19},"end":{"row":2,"column":20}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":20},"end":{"row":2,"column":21}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":21},"end":{"row":2,"column":22}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":3,"column":15},"end":{"row":3,"column":25}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":3,"column":15},"end":{"row":3,"column":16}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":16},"end":{"row":3,"column":17}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":17},"end":{"row":3,"column":18}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":18},"end":{"row":3,"column":19}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":3,"column":18},"end":{"row":3,"column":19}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":18},"end":{"row":3,"column":19}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":19},"end":{"row":3,"column":20}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":20},"end":{"row":3,"column":21}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":21},"end":{"row":3,"column":22}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":22},"end":{"row":3,"column":23}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":4,"column":15},"end":{"row":4,"column":25}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":4,"column":15},"end":{"row":4,"column":16}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":16},"end":{"row":4,"column":17}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":17},"end":{"row":4,"column":18}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":18},"end":{"row":4,"column":19}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":19},"end":{"row":4,"column":20}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":20},"end":{"row":4,"column":21}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":21},"end":{"row":4,"column":22}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":22},"end":{"row":4,"column":23}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":6,"column":31},"end":{"row":6,"column":42}},"text":"majorEvents"},{"action":"insertText","range":{"start":{"row":6,"column":31},"end":{"row":6,"column":32}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":32},"end":{"row":6,"column":33}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":33},"end":{"row":6,"column":34}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":34},"end":{"row":6,"column":35}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":35},"end":{"row":6,"column":36}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":36},"end":{"row":6,"column":37}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":37},"end":{"row":6,"column":38}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":38},"end":{"row":6,"column":39}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":9,"column":14},"end":{"row":9,"column":24}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":9,"column":14},"end":{"row":9,"column":15}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":15},"end":{"row":9,"column":16}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":16},"end":{"row":9,"column":17}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":17},"end":{"row":9,"column":18}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":18},"end":{"row":9,"column":19}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":19},"end":{"row":9,"column":20}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":20},"end":{"row":9,"column":21}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":21},"end":{"row":9,"column":22}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":10,"column":16},"end":{"row":10,"column":26}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":10,"column":16},"end":{"row":10,"column":17}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":17},"end":{"row":10,"column":18}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":18},"end":{"row":10,"column":19}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":19},"end":{"row":10,"column":20}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":20},"end":{"row":10,"column":21}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":21},"end":{"row":10,"column":22}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":22},"end":{"row":10,"column":23}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":10,"column":23},"end":{"row":10,"column":24}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":11,"column":15},"end":{"row":11,"column":25}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":11,"column":15},"end":{"row":11,"column":16}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":16},"end":{"row":11,"column":17}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":17},"end":{"row":11,"column":18}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":18},"end":{"row":11,"column":19}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":19},"end":{"row":11,"column":20}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":20},"end":{"row":11,"column":21}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":21},"end":{"row":11,"column":22}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":22},"end":{"row":11,"column":23}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":13,"column":31},"end":{"row":13,"column":42}},"text":"majorEvents"},{"action":"insertText","range":{"start":{"row":13,"column":31},"end":{"row":13,"column":32}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":32},"end":{"row":13,"column":33}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":33},"end":{"row":13,"column":34}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":34},"end":{"row":13,"column":35}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":35},"end":{"row":13,"column":36}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":36},"end":{"row":13,"column":37}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":37},"end":{"row":13,"column":38}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":38},"end":{"row":13,"column":39}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":39},"end":{"row":13,"column":40}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":16,"column":13},"end":{"row":16,"column":23}},"text":"MajorEvent"},{"action":"insertText","range":{"start":{"row":16,"column":13},"end":{"row":16,"column":14}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":14},"end":{"row":16,"column":15}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":15},"end":{"row":16,"column":16}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":16},"end":{"row":16,"column":17}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":17},"end":{"row":16,"column":18}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":18},"end":{"row":16,"column":19}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":19},"end":{"row":16,"column":20}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":20},"end":{"row":16,"column":21}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":23,"column":9},"end":{"row":23,"column":19}},"text":"majorEvent"},{"action":"insertText","range":{"start":{"row":23,"column":9},"end":{"row":23,"column":10}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":10},"end":{"row":23,"column":11}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":11},"end":{"row":23,"column":12}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":12},"end":{"row":23,"column":13}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":13},"end":{"row":23,"column":14}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":14},"end":{"row":23,"column":15}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":15},"end":{"row":23,"column":16}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":16},"end":{"row":23,"column":17}},"text":"l"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":21,"column":10},"end":{"row":21,"column":10},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1411269052140}