{"changed":true,"filter":false,"title":"majorEventUpsertPage.js","tooltip":"/Meteor/HackGTHealthCare/client/workflows/majorEventUpsertPage.js","value":"\nRouter.map(function(){\n  this.route('majorEventUpsertPage', {\n    path: '/newmajorEvent',\n    template: 'majorEventUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('majorEvents');\n    }\n  });\n  this.route('majorEventUpsertPage', {\n    path: '/editmajorEvent/:id',\n    template: 'majorEventUpsertPage',\n    waitOn: function(){\n      return Meteor.subscribe('majorEvents');\n    },\n    data: function(){\n      return MajorEvents.findOne(this.params.id);\n    }\n  });\n});\n\n//-------------------------------------------------------------\n\nTemplate.majorEventUpsertPage.events({\n  'keyup #titleInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'title': $('#titleInput').val()\n      }\n    });\n  },\n  'keyup #dateInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'date': $('#dateInput').val()\n      }\n    });\n  },\n  'keyup #timeInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'time': $('#timeInput').val()\n      }\n    });\n  },\n  'keyup #tagsInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'tags': $('#tagsInput').val()\n      }\n    });\n  },\n  'keyup #hospitalIdInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'hospitalId': $('#hospitalIdInput').val()\n      }\n    });\n  },\n  'keyup #notesInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'notes': $('#notesInput').val()\n      }\n    });\n  },\n  'keyup #drugsInput':function(){\n    MajorEvents.update({_id: this._id}, {\n      $set: {\n        'drugs': $('#drugsInput').val()\n      }\n    });\n  },\n  \n  'click #previewMajorEventButton':function(){\n    Router.go('/majorEvent/' + this._id);\n  }\n});\n\n\n\n//-------------------------------------------------------------\n\nTemplate.majorEventUpsertPage.helpers({\n  getRecordId: function() {\n    if(this._id) {\n      return this._id;\n    }else{\n      return \"---\";\n    }\n  }\n});\n\nTemplate.majorEventUpsertPage.events({\n  'click #upsertMajorEventButton': function() {\n    console.log('creating new user...');\n\n      // TODO:  add validation functions\n\n      var majorEventObject = {\n        title: $('#titleInput').val(),\n        date: $('#dateInput').val(),\n        time: $('#timeInput').val(),\n        tags: $('#tagsInput').val(),\n        hospitalId: $('#hospitalIdInput').val(),\n        notes: $('#notesInput').val(),\n        drugs: $('#drugsInput').val(),\n\n      };\n\n      if(this._id){\n        console.log('upserting ' + this._id);\n        var self = this;\n        majorEventObject._id = this._id;\n        Meteor.call('updateMajorEvent', majorEventObject, function(error, majorEvent){\n          console.log('error: ' + error);\n          if(majorEvent){\n            console.log('majorEvent: ' + majorEvent);\n            Router.go('/majorEvent/' + self._id);\n          }\n        });\n      }else{\n        Meteor.call('createNewMajorEvent', majorEventObject, function(error, majorEvent) {\n          console.log('error: ' + error);\n          console.log('majorEvent: ' + majorEvent);\n          Router.go('/majorEvent/' + majorEvent);\n        });\n      }\n\n  },\n  'click #deleteUserButton': function() {\n    MajorEvents.remove(Session.get('selected_user'));\n  },\n  'click #cancelDeleteButton': function() {\n    Router.go('/majorEvents');\n  }\n});\n","undoManager":{"mark":37,"position":38,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":25,"column":10},"end":{"row":25,"column":19}},"text":"firstName"},{"action":"insertText","range":{"start":{"row":25,"column":10},"end":{"row":25,"column":15}},"text":"title"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":28,"column":9},"end":{"row":28,"column":18}},"text":"FirstName"},{"action":"insertText","range":{"start":{"row":28,"column":9},"end":{"row":28,"column":14}},"text":"title"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":28,"column":21},"end":{"row":28,"column":30}},"text":"firstName"},{"action":"insertText","range":{"start":{"row":28,"column":21},"end":{"row":28,"column":26}},"text":"title"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":135,"column":8},"end":{"row":135,"column":17}},"text":"FirstName"},{"action":"insertText","range":{"start":{"row":135,"column":8},"end":{"row":135,"column":13}},"text":"title"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":135,"column":19},"end":{"row":135,"column":28}},"text":"firstName"},{"action":"insertText","range":{"start":{"row":135,"column":19},"end":{"row":135,"column":24}},"text":"title"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":10},"end":{"row":32,"column":18}},"text":"lastName"},{"action":"insertText","range":{"start":{"row":32,"column":10},"end":{"row":32,"column":14}},"text":"date"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":35,"column":9},"end":{"row":35,"column":17}},"text":"LastName"},{"action":"insertText","range":{"start":{"row":35,"column":9},"end":{"row":35,"column":13}},"text":"date"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":35,"column":20},"end":{"row":35,"column":28}},"text":"lastName"},{"action":"insertText","range":{"start":{"row":35,"column":20},"end":{"row":35,"column":24}},"text":"date"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":136,"column":8},"end":{"row":136,"column":16}},"text":"LastName"},{"action":"insertText","range":{"start":{"row":136,"column":8},"end":{"row":136,"column":12}},"text":"date"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":136,"column":18},"end":{"row":136,"column":26}},"text":"lastName"},{"action":"insertText","range":{"start":{"row":136,"column":18},"end":{"row":136,"column":22}},"text":"date"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":39,"column":10},"end":{"row":39,"column":17}},"text":"company"},{"action":"insertText","range":{"start":{"row":39,"column":10},"end":{"row":39,"column":14}},"text":"time"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":42,"column":9},"end":{"row":42,"column":16}},"text":"Company"},{"action":"insertText","range":{"start":{"row":42,"column":9},"end":{"row":42,"column":13}},"text":"time"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":42,"column":20},"end":{"row":42,"column":27}},"text":"company"},{"action":"insertText","range":{"start":{"row":42,"column":20},"end":{"row":42,"column":24}},"text":"time"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":137,"column":8},"end":{"row":137,"column":15}},"text":"Company"},{"action":"insertText","range":{"start":{"row":137,"column":8},"end":{"row":137,"column":12}},"text":"time"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":137,"column":18},"end":{"row":137,"column":25}},"text":"company"},{"action":"insertText","range":{"start":{"row":137,"column":18},"end":{"row":137,"column":22}},"text":"time"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":46,"column":10},"end":{"row":46,"column":17}},"text":"address"},{"action":"insertText","range":{"start":{"row":46,"column":10},"end":{"row":46,"column":14}},"text":"tags"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":49,"column":9},"end":{"row":49,"column":16}},"text":"Address"},{"action":"insertText","range":{"start":{"row":49,"column":9},"end":{"row":49,"column":13}},"text":"tags"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":49,"column":20},"end":{"row":49,"column":27}},"text":"address"},{"action":"insertText","range":{"start":{"row":49,"column":20},"end":{"row":49,"column":24}},"text":"tags"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":138,"column":8},"end":{"row":138,"column":15}},"text":"Address"},{"action":"insertText","range":{"start":{"row":138,"column":8},"end":{"row":138,"column":12}},"text":"tags"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":138,"column":18},"end":{"row":138,"column":25}},"text":"address"},{"action":"insertText","range":{"start":{"row":138,"column":18},"end":{"row":138,"column":22}},"text":"tags"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":53,"column":10},"end":{"row":53,"column":14}},"text":"city"},{"action":"insertText","range":{"start":{"row":53,"column":10},"end":{"row":53,"column":20}},"text":"hospitalId"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":56,"column":9},"end":{"row":56,"column":13}},"text":"City"},{"action":"insertText","range":{"start":{"row":56,"column":9},"end":{"row":56,"column":19}},"text":"hospitalId"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":56,"column":26},"end":{"row":56,"column":30}},"text":"city"},{"action":"insertText","range":{"start":{"row":56,"column":26},"end":{"row":56,"column":36}},"text":"hospitalId"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":139,"column":8},"end":{"row":139,"column":12}},"text":"City"},{"action":"insertText","range":{"start":{"row":139,"column":8},"end":{"row":139,"column":18}},"text":"hospitalId"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":139,"column":24},"end":{"row":139,"column":28}},"text":"city"},{"action":"insertText","range":{"start":{"row":139,"column":24},"end":{"row":139,"column":34}},"text":"hospitalId"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":60,"column":10},"end":{"row":60,"column":16}},"text":"county"},{"action":"insertText","range":{"start":{"row":60,"column":10},"end":{"row":60,"column":15}},"text":"notes"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":9},"end":{"row":63,"column":15}},"text":"County"},{"action":"insertText","range":{"start":{"row":63,"column":9},"end":{"row":63,"column":14}},"text":"notes"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":63,"column":21},"end":{"row":63,"column":27}},"text":"county"},{"action":"insertText","range":{"start":{"row":63,"column":21},"end":{"row":63,"column":26}},"text":"notes"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":140,"column":8},"end":{"row":140,"column":14}},"text":"County"},{"action":"insertText","range":{"start":{"row":140,"column":8},"end":{"row":140,"column":13}},"text":"notes"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":140,"column":19},"end":{"row":140,"column":25}},"text":"county"},{"action":"insertText","range":{"start":{"row":140,"column":19},"end":{"row":140,"column":24}},"text":"notes"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":141,"column":8},"end":{"row":141,"column":13}},"text":"State"},{"action":"insertText","range":{"start":{"row":141,"column":8},"end":{"row":141,"column":13}},"text":"drugs"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":141,"column":19},"end":{"row":141,"column":24}},"text":"state"},{"action":"insertText","range":{"start":{"row":141,"column":19},"end":{"row":141,"column":24}},"text":"drugs"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":10},"end":{"row":67,"column":15}},"text":"state"},{"action":"insertText","range":{"start":{"row":67,"column":10},"end":{"row":67,"column":15}},"text":"drugs"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":70,"column":9},"end":{"row":70,"column":14}},"text":"State"},{"action":"insertText","range":{"start":{"row":70,"column":9},"end":{"row":70,"column":14}},"text":"drugs"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":70,"column":21},"end":{"row":70,"column":26}},"text":"state"},{"action":"insertText","range":{"start":{"row":70,"column":21},"end":{"row":70,"column":26}},"text":"drugs"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":0},"end":{"row":108,"column":4}},"text":"  },"},{"action":"removeLines","range":{"start":{"row":75,"column":0},"end":{"row":108,"column":0}},"nl":"\n","lines":["    MajorEvents.update({_id: this._id}, {","      $set: {","        'Zip': $('#zipInput').val()","      }","    });","  },","  'keyup #phoneInput':function(){","    MajorEvents.update({_id: this._id}, {","      $set: {","        'Phone': $('#phoneInput').val()","      }","    });","  },","  'keyup #faxInput':function(){","    MajorEvents.update({_id: this._id}, {","      $set: {","        'Fax': $('#faxInput').val()","      }","    });","  },","  'keyup #emailInput':function(){","    MajorEvents.update({_id: this._id}, {","      $set: {","        'Email': $('#emailInput').val()","      }","    });","  },","  'keyup #webInput':function(){","    MajorEvents.update({_id: this._id}, {","      $set: {","        'Web': $('#webInput').val()","      }","    });"]},{"action":"removeText","range":{"start":{"row":74,"column":3},"end":{"row":74,"column":31}},"text":"keyup #zipInput':function(){"},{"action":"removeText","range":{"start":{"row":74,"column":3},"end":{"row":75,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":113,"column":0},"end":{"row":113,"column":37}},"text":"        Notes: $('#notesInput').val()"},{"action":"removeLines","range":{"start":{"row":108,"column":0},"end":{"row":113,"column":0}},"nl":"\n","lines":["        Zip: $('#zipInput').val(),","        Phone: $('#phoneInput').val(),","        Fax: $('#faxInput').val(),","        Email: $('#emailInput').val(),","        Web: $('#webInput').val(),"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":22,"column":0},"end":{"row":23,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":73,"column":2},"end":{"row":73,"column":3}},"text":"'"}]}]]},"ace":{"folds":[],"scrolltop":780,"scrollleft":0,"selection":{"start":{"row":74,"column":2},"end":{"row":74,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":71,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1411250064155}